RewriteEngine On

# Bloqueia arquivos sensíveis
<FilesMatch "^(\.env|composer\.json|composer\.lock|package\.json|package-lock\.json)$">
  Require all denied
</FilesMatch>

# Não entra em loop se já estiver em /public
RewriteRule ^public/ - [L]

# Se existir arquivo físico na raiz, serve normal (ex: /robots.txt)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# ✅ Qualquer outra coisa (inclui "/") vai para public/index.php
RewriteRule ^ public/index.php [L]
